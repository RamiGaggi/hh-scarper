{% extends "list.html" %}
{% load i18n %}
{% load static %}

{% block list-title %}<h2>{% translate "Список запросов" %}</h2>{% endblock list-title %}

{% block thead %}
    <tr>
        <th scope="col">ID</th>
        <th scope="col">{% translate "Ключевое слово" %}</th>
        <th scope="col">{% translate "Статус" %}</th>
        <th scope="col">{% translate "Затраченное время" %}</th>
        <th scope="col">{% translate "Дата создания" %}</th>
        <th scope="col">{% translate "Количество найденных вакансий" %}</th>
        <th scope="col"></th>
    </tr>
{% endblock thead%}

{% block tbody %}
    {% for request in request_list %}
        <tr>
            <td>{{ request.pk }}</td>
            <td><a href="{% url 'hhscarper:request-detail' request.pk %}">{{ request.keyword }}</a></td>
            <td>
                {% with request.status as req_status  %}
                    {% if req_status == "Resolved" %}
                        <img src="{% static 'img/check-circle.svg' %}"  alt="{{ req_status }}">
                    {% elif  req_status == "Pending" %}
                        <img src="{% static 'img/stopwatch.svg' %}"  alt="{{ req_status }}">
                    {% else %}
                        <img src="{% static 'img/exclamation-triangle.svg' %}"  alt="{{ req_status }}">
                    {% endif %}
                {% endwith %}
            </td>
            <td>{{ request.time|time:"H:i:s" }}</td>
            <td>{{ request.created_at|date:"H:i:s | d/m/y" }}</td>
            <td>{{ request.vacancy_set.count }}</td>
            <td>
                <a class="btn btn-outline-danger btn-sm" href="{% url 'hhscarper:request-delete' request.pk %}"><img src="{% static 'img/trash.svg' %}"  alt="trash"> {% translate "Удалить" %}</a>
            </td>

        </tr>
    {% endfor %}
{% endblock tbody%}
